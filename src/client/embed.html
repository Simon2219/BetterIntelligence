<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat</title>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        *{box-sizing:border-box;margin:0;padding:0}
        body{font-family:'DM Sans',sans-serif;background:#0a0a0f;color:#f0f0f5;min-height:100vh;display:flex;flex-direction:column}
        #chat-header{padding:1rem;background:#12121a;border-bottom:1px solid #252535}
        #chat-messages{flex:1;overflow-y:auto;padding:1rem;display:flex;flex-direction:column;gap:0.75rem}
        .msg{padding:0.75rem 1rem;border-radius:10px;max-width:85%}
        .msg.user{align-self:flex-end;background:#6366f1}
        .msg.assistant{align-self:flex-start;background:#16161f;border:1px solid #252535}
        #chat-input{display:flex;gap:0.5rem;padding:1rem;background:#12121a;border-top:1px solid #252535}
        #chat-input input{flex:1;padding:0.6rem 1rem;border-radius:8px;border:1px solid #252535;background:#16161f;color:#f0f0f5;font-size:1rem}
        #chat-input input:focus{outline:none;border-color:#6366f1}
        #chat-input button{padding:0.6rem 1.2rem;border-radius:8px;border:none;background:#6366f1;color:white;font-weight:500;cursor:pointer}
        #chat-input button:disabled{opacity:0.5;cursor:not-allowed}
    </style>
    <script src="/socket.io/socket.io.js"></script>
</head>
<body>
    <div id="chat-header">Chat</div>
    <div id="chat-messages"></div>
    <div id="chat-input">
        <input type="text" id="input" placeholder="Type a message..." autocomplete="off">
        <button id="send">Send</button>
    </div>
    <script>
        const slug = location.pathname.split('/embed/')[1];
        if (!slug) { document.body.innerHTML = '<p>Invalid embed</p>'; } else {
            const msgEl = document.getElementById('chat-messages');
            const inputEl = document.getElementById('input');
            const sendBtn = document.getElementById('send');
            function addMsg(role, content) {
                const d = document.createElement('div');
                d.className = 'msg ' + role;
                d.textContent = content;
                msgEl.appendChild(d);
                msgEl.scrollTop = msgEl.scrollHeight;
            }
            addMsg('assistant', 'Embed chat - connect via Socket.io with deploy namespace for full experience.');
            sendBtn.addEventListener('click', () => {
                const t = inputEl.value.trim();
                if (!t) return;
                addMsg('user', t);
                inputEl.value = '';
                addMsg('assistant', 'AI response will appear here when backend is wired.');
            });
            inputEl.addEventListener('keypress', e => { if (e.key === 'Enter') sendBtn.click(); });
        }
    </script>
</body>
</html>
